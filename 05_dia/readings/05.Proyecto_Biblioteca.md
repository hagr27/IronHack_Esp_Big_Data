# Proyecto FastAPI: Gestión de Usuarios y Libros

Este proyecto implementa un **API con FastAPI** para gestionar usuarios, libros y préstamos, utilizando **MongoDB** para usuarios y **PostgreSQL** para libros.

---

## Estructura del proyecto

```text
project/
├─ main.py
```

---

## Requisitos

- Python 3.10+
- FastAPI
- Uvicorn
- pymongo
- SQLAlchemy
- psycopg2-binary
- Docker (opcional, para levantar MongoDB y PostgreSQL)

---

## Flujo para probar

### 1. Levantar FastAPI
```bash
uvicorn main:app --reload
```

### 2. Insertar datos de ejemplo
```http
POST http://127.0.0.1:8000/seed
```

### 3. Verificar los usuarios en MongoDB
```http
GET http://127.0.0.1:8000/usuarios
```

### 4. Verificar los libros en PostgreSQL
```http
GET http://127.0.0.1:8000/libros
```

### 5. Consultar los libros prestados por un usuario
```http
GET http://127.0.0.1:8000/usuarios/jdoe/libros
GET http://127.0.0.1:8000/usuarios/asmith/libros
```

---

## Conexión a Bases de Datos

### MongoDB

Si usas Docker:
```bash
sudo docker run -d \
  --name mongodb \
  -p 27017:27017 \
  -v $HOME/mongo_data:/data/db \
  mongo:latest
```

### PostgreSQL

Puedes usar Docker o tu instalación local. Asegúrate de tener la base de datos creada y accesible desde tu proyecto.

---

## Notas

- La API expone endpoints para **usuarios**, **libros**, **préstamos** y **seed** (para insertar datos de prueba).  
- Se recomienda usar **Postman** o **VS Code REST Client** para probar los endpoints.  
- Todos los endpoints están disponibles en `http://127.0.0.1:8000/`.
